<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Data Visualization | Title of Example</title>
    <link href="css/style.css" rel="stylesheet" />
  </head>


  <body id="inner">

    <header>
      <h1>Data Visualization</h1>

      <!--
        An optional navigation ... you may want to include a link to
        your personal portfolio, email, etc.
      -->

      <!-- <nav>
        <ul>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
      </nav> -->

    </header>

    <main>

      <!--
        It is not ideal to exclude a menu from inner pages, but the
        focus is on data visualization, not site design. This
        'breadcrumb' approach will keep things simple while the
        site added to week-to-week, but considers the necessity to
        to swap out the nav on each page (for the completed one on
        'index.html') and make minor modifications to 'style.css' to
        create a more robust site nav once all examples are complete.
      -->

      <nav>
        <p>&laquo; <a href="index.html">Return home</a></p>
      </nav>

      <section id="example">
        <p class="message">You need a browser which supports CSS Grid! Why not <a href="https://browsehappy.com/">download</a> one which does?</p>

        <h2>Weather Widget</h2>
        <p>The weather for Coral Gables ("West Miami") (25.7476, -80.2595) and its forcasts are:</p>
        <table id="weather">
          <tr>
            <th>Date/Time</th>
            <th>Temperature</th>
            <th>Short Forecast</th>
            <th>Wind</th>
          </tr>
        </table>



      </section>

      <section id="writing">
        <p>I used the National Weather Service's publicly accessible API and underscore.js for this exercise to create a widget with weather information for the week. The coordinates I used is for Coral Gables ("West Miami") (25.7476, -80.2595).</p>

        <p id="source"><a href= "https://api.weather.gov/points/25.7476,-80.2595">Source: National Weather Service</a></p>
      </section>

    </main>

    <footer>
      <p><a href="mailto:s.tong1@umiami.edu">Siyuan (Sharry) Tong</a></p>
      <p>JMM 692: Interactive Data Visualization</p>
      <p>Spring 2018</p>
    </footer>

    <script src="js/zepto.min.js"></script>
    <script src="js/underscore.min.js"></script>
    <script>

      $.getJSON("https://api.weather.gov/gridpoints/MFL/106,48/forecast", // add 'forecast' URL here
        function(data) {

          _(data.properties.periods).each(
            function(item){
              var tableRow = document.createElement("tr");
              var date = document.createElement("td");
              var temp = document.createElement("td");
              var forecast = document.createElement("td");
              var wind = document.createElement("td");

              date.append(item.name)
              temp.append(item.temperature  + item.temperatureUnit )
              forecast.append(item.shortForecast)
              wind.append(item.windSpeed + " ( " + item.windDirection + " ) ")

              document.getElementById("weather").append(tableRow, date, temp, forecast, wind );
            }
          )
          // your code goes here

        }
      );

    </script>

  </body>
</html>
